<!DOCTYPE html>
<html>





<head>
  <title>コンテキストと依存性インジェクション - main - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src https://dpm.demdex.net; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com https://static.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com https://app.mailjet.com http://www.youtube.com http://www.googleadservices.com https://googleads.g.doubleclick.net https://dpm.demdex.net https://giscus.app; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self'; frame-src https://www.googletagmanager.com https://www.youtube.com https://embed.restream.io https://app.mailjet.com https://giscus.app; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/main/guides/cdi-reference" />
  <meta property="og:title" content="コンテキストと依存性インジェクション - main" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/cdi-reference">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  

<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
    </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Quarkusとは <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/continuum" class="">リアクティブ</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">学ぶ<i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ガイド</a></li>
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">コミュニティ <i class="fas
fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="/publications" class="">出版物</a></li>
          <li><a href="/awards" class="">受賞</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://ja.quarkus.io/">日本語 - JAPANESE</a></li>
          <li><a href="https://cn.quarkus.io/">简体中文 - CHINESE</a></li>
          </ul>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    



<div class="full-width-version-bg grey align-self">
  <div class="grid-wrapper">
    <div class="grid__item width-6-12">
      <p class="returnlink"><i class="fas fa-angle-left"></i><a href="/version/main/guides/">ガイド一覧に戻る</a></p>
    </div>
    <div class="grid__item width-6-12 align-self-center text-right hide-mobile">
      <label id="guide-version-label">ガイドのバージョンを選択</label>
      <select id="guide-version-dropdown">
        
      
        
        
        
        
          
        <option value="main" selected>Main - SNAPSHOT</option>
        
        
      
        
        
        
        
          
        <option value="latest" >2.10 - Latest</option>
        
        
      
        
        
        
        
          
        <option value="2.7" >2.7</option>
        
        
      
        
        
        
        
          
        <option value="2.2" >2.2</option>
        
        
      
        
        
        
        
          
        <option value="1.11" >1.11</option>
        
        
      
    
      </select>
    </div>
  </div>
</div>

<div class="grid-wrapper guide">
  <div class="grid__item width-12-12 width-12-12-mobile">
    <h1 class="text-caps">コンテキストと依存性インジェクション </h1>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#bean_discovery">1. Bean Discovery</a>
<ul class="sectlevel2">
<li><a href="#how-to-generate-a-jandex-index">1.1. How to Generate a Jandex Index</a></li>
<li><a href="#ディスカバリーから型と依存関係を除外する方法">1.2. ディスカバリーから型と依存関係を除外する方法</a></li>
</ul>
</li>
<li><a href="#ネイティブ実行可能ファイルとプライベートメンバー">2. ネイティブ実行可能ファイルとプライベートメンバー</a></li>
<li><a href="#supported_features">3. サポートされている機能</a></li>
<li><a href="#limitations">4. 制約事項</a></li>
<li><a href="#nonstandard_features">5. 標準外の機能</a>
<ul class="sectlevel2">
<li><a href="#eager-instantiation-of-beans">5.1. Eager Instantiation of Beans</a></li>
<li><a href="#リクエストコンテキストのライフサイクル">5.2. リクエストコンテキストのライフサイクル</a></li>
<li><a href="#修飾された注入フィールド">5.3. 修飾された注入フィールド</a></li>
<li><a href="#簡略化されたコンストラクター注入">5.4. 簡略化されたコンストラクター注入</a></li>
<li><a href="#remove_unused_beans">5.5. 未使用の Bean の削除</a></li>
<li><a href="#default_beans">5.6. デフォルトの Bean</a></li>
<li><a href="#enable_build_profile">5.7. Enabling Beans for Quarkus Build Profile</a></li>
<li><a href="#enable_build_properties">5.8. Enabling Beans for Quarkus Build Properties</a></li>
<li><a href="#選択された代替の宣言">5.9. 選択された代替の宣言</a></li>
<li><a href="#簡略化された-producer-メソッドの宣言">5.10. 簡略化された Producer メソッドの宣言</a></li>
<li><a href="#静的メソッドのインターセプション">5.11. 静的メソッドのインターセプション</a></li>
<li><a href="#final-クラスとメソッドを処理する能力">5.12. final クラスとメソッドを処理する能力</a></li>
<li><a href="#コンテナー管理型の並行処理">5.13. コンテナー管理型の並行処理</a></li>
<li><a href="#反復可能なインターセプターバインディング">5.14. 反復可能なインターセプターバインディング</a></li>
<li><a href="#プログラムによるルックアップの結果をキャッシュする">5.15. プログラムによるルックアップの結果をキャッシュする</a></li>
<li><a href="#プログラムによるルックアップで取得できる-bean-を宣言的に選択する">5.16. プログラムによるルックアップで取得できる Bean を宣言的に選択する</a></li>
<li><a href="#複数の-bean-インスタンスを直感的に注入する">5.17. 複数の Bean インスタンスを直感的に注入する</a></li>
<li><a href="#メソッドとコンストラクターのクラスレベルのインターセプターバインディングを無視する">5.18. メソッドとコンストラクターのクラスレベルのインターセプターバインディングを無視する</a></li>
<li><a href="#exceptions-thrown-by-an-asynchronous-observer-method">5.19. Exceptions Thrown By An Asynchronous Observer Method</a></li>
</ul>
</li>
<li><a href="#build_time_apis">6. ビルド時間延長</a></li>
<li><a href="#開発モード">7. 開発モード</a></li>
<li><a href="#arc-configuration-reference">8. ArC Configuration Reference</a></li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus DI ソリューション (ArC とも呼ばれます) は <a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html" target="_blank" rel="noopener">Contexts and Dependency Injection for Java 2.0</a> 仕様に基づいています。ただし、これは TCK によって検証された完全な CDI 実装ではありません。CDI 機能のサブセットのみが実装されています。以下も合わせて参照下さい: <a href="#supported_features">the list of supported features</a> および <a href="#limitations">the list of limitations</a>。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
CDI が初めての方は、最初に <a href="cdi">Introduction to CDI</a> を読むことをお勧め致します。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
既存の CDI コードのほとんどは問題なく動作するはずですが、Quarkus のアーキテクチャや目標との間には、わずかな相違点がいくつかあります。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bean_discovery"><a class="anchor" href="#bean_discovery"></a>1. Bean Discovery</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CDI での Bean 検出は、レガシーなデプロイメント構造と、基礎となるモジュールアーキテクチャーのアクセシビリティ要件を含む複雑なプロセスです。しかし、Quarkusは <strong>簡素化された Bean 検出</strong> を使用しています。 <a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#default_bean_discovery" target="_blank" rel="noopener"><code>annotated</code> bean検出モード</a> と可視性の境界がない単一の Bean アーカイブのみが存在します。</p>
</div>
<div class="paragraph">
<p>Bean のアーカイブは、次のものから合成されます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the application classes,</p>
</li>
<li>
<p><code>beans.xml</code> 記述子を含む依存関係 (内容は無視される)</p>
</li>
<li>
<p>Jandex インデックスを含む依存関係 (<code>META-INF/jandex.idx</code>)</p>
</li>
<li>
<p><code>application.properties</code> の <code>quarkus.index-dependency</code> で参照される依存関係</p>
</li>
<li>
<p>Quarkus の統合コード</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#bean_defining_annotations" target="_blank" rel="noopener">bean定義アノテーション</a> を持たない Bean クラスは検出されません。この動作は CDI で定義されています。しかし、producer メソッドやフィールド、observer メソッドは、宣言クラスが Bean 定義アノテーションを持たない場合でも検出されます (この動作は CDI で定義されているものとは異なります)。実際には、Bean クラスの宣言は <code>@Dependent</code> でアノテーションされていると見なされます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Quarkus エクステンションは、追加のディスカバリールールを宣言することができます。たとえば、<code>@Scheduled</code> ビジネスメソッドは、宣言するクラスが Bean 定義アノテーションでアノテーションされていなくても登録されます。
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="how-to-generate-a-jandex-index"><a class="anchor" href="#how-to-generate-a-jandex-index"></a>1.1. How to Generate a Jandex Index</h3>
<div class="paragraph">
<p>Jandex インデックスを持つ依存関係は、自動的に Bean をスキャンします。インデックスを生成するには、以下を <code>pom.xml</code> に追加してください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
      &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.2.2&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;make-index&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;jandex&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are using gradle, you can apply the following plugin to your <code>build.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">plugins {
    id 'org.kordamp.gradle.jandex' version '0.11.0'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>依存関係を変更できなくても、<code>quarkus.index-dependency</code> エントリーを <code>application.properties</code> に追加することでインデックスを作成できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.index-dependency.&lt;name&gt;.group-id=
quarkus.index-dependency.&lt;name&gt;.artifact-id=
quarkus.index-dependency.&lt;name&gt;.classifier=(this one is optional)</code></pre>
</div>
</div>
<div class="paragraph">
<p>たとえば、次のエントリーは、<code>org.acme:acme-api</code> 依存関係が確実にインデックス化されるようにします。</p>
</div>
<div class="listingblock">
<div class="title">application.properties の例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.index-dependency.acme.group-id=org.acme <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.index-dependency.acme.artifact-id=acme-api <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>値 <code>acme</code> は、名前で識別される依存関係のグループ ID です。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>値は、名前 <code>acme</code> で識別される依存関係のアーティファクト ID です。</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ディスカバリーから型と依存関係を除外する方法"><a class="anchor" href="#ディスカバリーから型と依存関係を除外する方法"></a>1.2. ディスカバリーから型と依存関係を除外する方法</h3>
<div class="paragraph">
<p>サードパーティーのライブラリーからのいくつかの Bean が Quarkus で正しく動作しないことがあります。典型的な例は、ポータブル拡張機能を注入する Bean です。このような場合は、型や依存関係を Bean の検出から除外することができます。<code>quarkus.arc.exclude-types</code> プロパティーは、除外すべきクラスに一致するために使用される文字列値のリストを受け入れます。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. 値の例</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリューe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">説明</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスの完全修飾名と一致させる</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme</code> パッケージとクラスを一致させる</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">パッケージが <code>org.acme</code> で始まるクラスを一致させる</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスのシンプルな名前に一致する</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">application.properties の例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.exclude-types=org.acme.Foo,org.acme.*,Bar <i class="conum" data-value="1"></i><b>(1)</b><i class="conum" data-value="2"></i><b>(2)</b><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>タイプ <code>org.acme.Foo</code> を除外します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>org.acme</code> パッケージからすべてのタイプを除外します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>シンプルな名前が <code>Bar</code> であるすべてのタイプを除外します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>また、除外しなければ Bean をスキャンする、依存関係のあるアーティファクトを除外することも可能です。たとえば、<code>beans.xml</code> 記述子を含んでいる場合です。</p>
</div>
<div class="listingblock">
<div class="title">application.properties の例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.exclude-dependency.acme.group-id=org.acme <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.arc.exclude-dependency.acme.artifact-id=acme-services <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>値 <code>acme</code> は、名前で識別される依存関係のグループ ID です。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>値は、名前 <code>acme</code> で識別される依存関係のアーティファクト ID です。</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ネイティブ実行可能ファイルとプライベートメンバー"><a class="anchor" href="#ネイティブ実行可能ファイルとプライベートメンバー"></a>2. ネイティブ実行可能ファイルとプライベートメンバー</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus では、GraalVM を使用してネイティブ実行可能ファイルをビルドしています。GraalVM の制限事項の 1 つは、 <a href="https://github.com/oracle/graal/blob/master/docs/reference-manual/native-image/Limitations.md#reflection" target="_blank" rel="noopener">リフレクション</a> の使用です。リフレクション操作はサポートされていますが、関連するすべてのメンバーを明示的にリフレクション用に登録する必要があります。これらの登録を行うと、より大きなネイティブ実行可能ファイルになります。</p>
</div>
<div class="paragraph">
<p>また、Quarkus DI がプライベートメンバーにアクセスする必要がある場合は、<strong>リフレクションを使用しなければなりません</strong>。そのため、Quarkus ユーザーは、プライベートメンバーを Bean で <em>使用しないこと</em> が推奨されています。これには、インジェクションフィールド、コンストラクターとイニシャライザー、observer メソッド、producer メソッドおよび producer フィールド、disposers メソッドおよび interceptor メソッドが含まれます。</p>
</div>
<div class="paragraph">
<p>プライベートメンバーの使用を回避するには、package-private 修飾子を使うことができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class CounterBean {

    @Inject
    CounterService counterService; <i class="conum" data-value="1"></i><b>(1)</b>

    void onMessage(@Observes Event msg) { <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>package-private injection フィールド。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>package-private observer メソッド。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>あるいはコンストラクターの注入。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class CounterBean {

    private CounterService service;

    CounterBean(CounterService service) { <i class="conum" data-value="1"></i><b>(1)</b>
      this.service = service;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>パッケージプライベートコンストラクター挿入。この特定の場合、<code>@Inject</code> は任意です。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported_features"><a class="anchor" href="#supported_features"></a>3. サポートされている機能</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>プログラミングモデル</p>
<div class="ulist">
<ul>
<li>
<p>Managed beans implemented by a Java class</p>
<div class="ulist">
<ul>
<li>
<p>ライフサイクルコールバック <code>@PostConstruct</code> および <code>@PreDestroy</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>producer のメソッドおよびフィールド、ディスポーザー</p>
</li>
<li>
<p>修飾子</p>
</li>
<li>
<p>代替品</p>
</li>
<li>
<p>ステレオタイプ</p>
</li>
</ul>
</div>
</li>
<li>
<p>依存関係の注入とルックアップ</p>
<div class="ulist">
<ul>
<li>
<p>フィールド、コンストラクター、イニシャライザー/セッター挿入</p>
</li>
<li>
<p>タイプセーフ解決</p>
</li>
<li>
<p><code>javax.Enterprise.inject.instance</code> を介したプログラムによる検索</p>
</li>
<li>
<p>クライアントのプロキシー</p>
</li>
<li>
<p>挿入点メタデータ</p>
</li>
</ul>
</div>
</li>
<li>
<p>スコープとコンテキスト</p>
<div class="ulist">
<ul>
<li>
<p><code>@Dependent</code>, <code>@ApplicationScoped</code>, <code>@Singleton</code>, <code>@RequestScoped</code> and <code>@SessionScoped</code></p>
</li>
<li>
<p>カスタムスコープとコンテキスト</p>
</li>
</ul>
</div>
</li>
<li>
<p>インターセプター</p>
<div class="ulist">
<ul>
<li>
<p>ビジネスメソッドインターセプタ―: <code>@AroundInvoke</code></p>
</li>
<li>
<p>ライフサイクルイベントコールバックのためのインターセプター: <code>@PostConstruct</code>、<code>@PreDestroy</code>、<code>@AroundConstruct</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>デコレーター</p>
</li>
<li>
<p>非同期イベントとトランザクションオブザーバーメソッドを含むイベントとオブザーバーメソッド</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="limitations"><a class="anchor" href="#limitations"></a>4. 制約事項</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><code>@ConversationScoped</code> はサポートされていません。</p>
</li>
<li>
<p>ポータブル拡張機能はサポートされていません。</p>
</li>
<li>
<p><code>BeanManager</code> - メソッドでは、<code>getBeans()</code>、<code>createCreationalContext()</code>、<code>getReference()</code>、<code>getInjectableReference()</code>、<code>resolve()</code>、<code>getContext()</code>、<code>fireEvent()</code>、<code>getEvent()</code>、および <code>createInstance()</code> のみが実装されています。</p>
</li>
<li>
<p>専門性はサポートされていません。</p>
</li>
<li>
<p><code>beans.xml</code> 記述子の内容は無視されます。</p>
</li>
<li>
<p>パッシベーションおよびパッシベーションスコープはサポートされていません。</p>
</li>
<li>
<p>スーパークラスのインターセプターメソッドは実装されていません。</p>
</li>
<li>
<p><code>@Interceptors</code> はサポートされていません。</p>
</li>
<li>
<p><code>Event</code> などのビルトイン Bean の装飾はサポートされていません</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nonstandard_features"><a class="anchor" href="#nonstandard_features"></a>5. 標準外の機能</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="eager-instantiation-of-beans"><a class="anchor" href="#eager-instantiation-of-beans"></a>5.1. Eager Instantiation of Beans</h3>
<div class="sect3">
<h4 id="lazy_by_default"><a class="anchor" href="#lazy_by_default"></a>5.1.1. デフォルトではレイジー</h4>
<div class="paragraph">
<p>デフォルトでは、CDI Bean は必要なときに作成されます。何を正確に「必要とされる」かは、Bean のスコープに依存します。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>挿入されたインスタンス (仕様による文脈参照) からメソッドが呼び出される場合は、<strong>通常のスコープ付き Bean</strong> (<code>@ApplicationScoped</code>、<code>@RequestScoped</code> など) が必要になります。</p>
<div class="paragraph">
<p>言い換えれば、通常のスコープ付き Bean を挿入しても、Bean のコンテキストインスタンスの代わりに <em>クライアントプロキシー</em> が挿入されるため、十分ではありません。</p>
</div>
</li>
<li>
<p>挿入時に <strong>疑似スコープを持つ Bean</strong> (<code>@Dependent</code> および <code>@Singleton</code>) が作成されます。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">遅延インスタンス化の例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton // =&gt; pseudo-scope
class AmazingService {
  String ping() {
    return "amazing";
  }
}

@ApplicationScoped // =&gt; normal scope
class CoolService {
  String ping() {
    return "cool";
  }
}

@Path("/ping")
public class PingResource {

  @Inject
  AmazingService s1; <i class="conum" data-value="1"></i><b>(1)</b>

  @Inject
  CoolService s2; <i class="conum" data-value="2"></i><b>(2)</b>

  @GET
  public String ping() {
    return s1.ping() + s2.ping(); <i class="conum" data-value="3"></i><b>(3)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>挿入は、<code>AmazingService</code> のインスタンス化をトリガーします。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>インジェクション自体は、<code>CoolService</code> のインスタンス化にはなりません。クライアントプロキシーが挿入されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>挿入されたプロキシーに対する最初の呼び出しは、<code>CoolService</code> のインスタンス化をトリガーします。</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="startup_event"><a class="anchor" href="#startup_event"></a>5.1.2. スタートアップイベント</h4>
<div class="paragraph">
<p>ただし、Bean の性急なインスタンス化が必要な場合は、次のことができます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>StartupEvent</code> のオブザーバーを宣言します。この場合、Bean のスコープは重要ではありません。</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
class CoolService {
  void startup(@Observes StartupEvent event) { <i class="conum" data-value="1"></i><b>(1)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>CoolService</code> は、起動時に作成され、オブザーバーメソッドの呼び出しを処理します。</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>StartupEvent</code> のオブザーバーで Bean を使用します。<a href="#lazy_by_default">lazy_by_default</a> の説明に従って、通常のスコープ付き Bean を使用する必要があります。</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
class MyBeanStarter {

  void startup(@Observes StartupEvent event, AmazingService amazing, CoolService cool) { <i class="conum" data-value="1"></i><b>(1)</b>
    cool.toString(); <i class="conum" data-value="2"></i><b>(2)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>AmazingService</code> は注入時に作成されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>CoolService</code> is a normal scoped bean, so we have to invoke a method upon the injected proxy to force the instantiation.</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="lifecycle#startup_annotation">Startup annotation</a>: で説明したように、<code>@io.quarkus.runtime.Startup</code> で Bean をアノテーションします。</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Startup <i class="conum" data-value="1"></i><b>(1)</b>
@ApplicationScoped
public class EagerAppBean {

   private final String name;

   EagerAppBean(NameGenerator generator) { <i class="conum" data-value="2"></i><b>(2)</b>
     this.name = generator.createName();
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@Startup</code> でアノテーションされた各Beanに対して、 <code>StartupEvent</code> の合成オブザーバが生成されます。デフォルトの優先度が使用されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Beanのコンストラクタは、アプリケーションの起動時に呼び出され、結果として得られるコンテキストインスタンスがアプリケーションのコンテキストに格納されます。</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Quarkus ユーザーは、<a href="lifecycle">Application Initialization and Termination</a> のガイドで説明されているように、常に <code>@Initialized(ApplicationScoped.class)</code> よりも <code>@Observes StartupEvent</code> を選択することが推奨されます。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="リクエストコンテキストのライフサイクル"><a class="anchor" href="#リクエストコンテキストのライフサイクル"></a>5.2. リクエストコンテキストのライフサイクル</h3>
<div class="paragraph">
<p>リクエストコンテキストもアクティブになっています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>同期オブザーバメソッドの通知中に</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>リクエストコンテキストは破棄されます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>通知が開始したときにまだアクティブではなかった場合はイベントのオブザーバー通知が完了した後</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
オブザーバー通知のためにリクエストコンテキストが初期化されると、修飾子 <code>@Initialized(RequestScoped.class)</code> を持つイベントが発生します。さらに、修飾子 <code>@BeforeDestroyed(RequestScoped.class)</code> および <code>@Destroyed(RequestScoped.class)</code> を持つイベントは、リクエストコンテキストが破棄されたときに発生します。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="修飾された注入フィールド"><a class="anchor" href="#修飾された注入フィールド"></a>5.3. 修飾された注入フィールド</h3>
<div class="paragraph">
<p>CDI では、フィールド注入ポイントを宣言する場合は <code>@Inject</code> と任意で修飾子のセットを使用する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  @Inject
  @ConfigProperty(name = "cool")
  String coolProperty;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus では、注入されたフィールドが少なくとも 1 つの修飾子を宣言している場合は、<code>@Inject</code> アノテーションを完全にスキップすることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  @ConfigProperty(name = "cool")
  String coolProperty;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
後述する特別なケースを除いて、コンストラクターとメソッドの注入には <code>@Inject</code> が必要です。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="簡略化されたコンストラクター注入"><a class="anchor" href="#簡略化されたコンストラクター注入"></a>5.4. 簡略化されたコンストラクター注入</h3>
<div class="paragraph">
<p>CDI では、通常のスコープ付き Bean は常に no-args コンストラクターを宣言しなければなりません (このコンストラクターは、他のコンストラクターを宣言しない限り、通常はコンパイラーによって生成されます)。しかし、この要件はコンストラクターの注入を複雑にします。CDI で動作させるためにはダミーの no-args コンストラクターを提供する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyCoolService {

  private SimpleProcessor processor;

  MyCoolService() { // dummy constructor needed
  }

  @Inject // constructor injection
  MyCoolService(SimpleProcessor processor) {
    this.processor = processor;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no need to declare dummy constructors for normal scoped bean in Quarkus - they are generated automatically. Also, if there&#8217;s only one constructor there is no need for <code>@Inject</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyCoolService {

  private SimpleProcessor processor;

  MyCoolService(SimpleProcessor processor) {
    this.processor = processor;
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
no-args コンストラクターを宣言していないクラスを Bean クラスが継承している場合は、no-args コンストラクターは自動的に生成されません。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="remove_unused_beans"><a class="anchor" href="#remove_unused_beans"></a>5.5. 未使用の Bean の削除</h3>
<div class="paragraph">
<p>コンテナーは、デフォルトでビルド中に未使用の Bean、インターセプター、デコレーターをすべて削除しようとします。この最適化は、生成されるクラスの量を最小限に抑え、メモリーを節約するのに役立ちます。ただし、Quarkus は、<code>CDI.current()</code> staticメソッドを介して実行されたプログラムによるルックアップを検出できません。したがって、削除すると誤検知エラーが発生する可能性があります。つまり、Bean は実際に使用されていても、削除されます。このような場合、ログに大きな警告が表示されます。ユーザーとエクステンションの作成者にはいくつかのオプションがあります: <a href="#eliminate_false_positives">how to eliminate false positives</a>。</p>
</div>
<div class="paragraph">
<p>この最適化は、<code>quarkus.arc.remove-unused-beans</code> を <code>none</code> または <code>false</code> に設定することで無効にすることができます。Quarkus では、アプリケーションの Bean は未使用かどうかにかかわらず削除されず、アプリケーション以外のクラスは通常通りに最適化が行われるという中間モードも提供されています。このモードを使用するには、<code>quarkus.arc.remove-unused-beans</code> を <code>fwk</code> または <code>framework</code> に設定します。</p>
</div>
<div class="sect3">
<h4 id="何が削除されましたか"><a class="anchor" href="#何が削除されましたか"></a>5.5.1. 何が削除されましたか?</h4>
<div class="paragraph">
<p>Quarkus は最初に、依存関係ツリーのルートを形成する、いわゆる <em>unremovable</em> Bean を識別します。良い例は、JAX-RS リソースクラスまたは <code>@Scheduled</code> メソッドを宣言する Bean です。</p>
</div>
<div class="paragraph">
<p><em>unremovable</em> Bean:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is excluded from removal by an extension, or</p>
</li>
<li>
<p><code>@Named</code> を通して指定された名前を持っているか、</p>
</li>
<li>
<p>declares an observer method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>_未使用の_Bean:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>unremovable</em> ではなく、</p>
</li>
<li>
<p>is not eligible for injection to any injection point in the dependency tree, and</p>
</li>
<li>
<p>does not declare any producer which is eligible for injection to any injection point in the dependency tree, and</p>
</li>
<li>
<p><code>javax.enterprise.inject.Instance</code> または <code>javax.inject.Provider</code> の注入ポイントに注入することが出来ないこと</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>未使用のインターセプターとデコレーターは、どの Bean とも関連付けられていません。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>開発モードを使用している場合（例: <code>./mvnw clean compile quarkus:dev</code> を実行している場合）、どの Bean が削除されているかの詳細な情報を見ることができます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>コンソールで - <code>application.properties</code> で DEBUG レベルを有効にするだけです。例:　<code>quarkus.log.category."io.quarkus.arc.processor".level=DEBUG</code></p>
</li>
<li>
<p>関連する開発 UI ページ</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="eliminate_false_positives"><a class="anchor" href="#eliminate_false_positives"></a>5.5.2. 誤検知を排除する方法</h4>
<div class="paragraph">
<p>ユーザーは、コンテナーに <code>@io.quarkus.arc.Unremovable</code> をアノテーションすることで、(上で指定したルールをすべて満たしていても) 特定の Bean を削除しないように指示することができます。このアノテーションは、クラス、producer メソッド、producer フィールドに置くことができます。</p>
</div>
<div class="paragraph">
<p>これは常に可能ではないので、<code>application.properties</code> を通して同じことを実現するオプションがあります。<code>quarkus.arc.unremovable-types</code> プロパティーは、Bean の名前やパッケージに基づいて一致させるための文字列値のリストを受け付けます。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. 値の例</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリューe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">説明</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bean クラスの完全修飾名と一致させる</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean クラスのパッケージが <code>org.acme</code> である Bean に一致します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean クラスのパッケージが <code>org.acme</code> で開始する Bean に一致します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean クラスのシンプルな名前に一致します。</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">application.properties の例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.unremovable-types=org.acme.Foo,org.acme.*,Bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>さらに、エクステンションは <code>UnremovableBeanBuildItem</code> を生成することで、可能性のある誤検出を排除することができます。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="default_beans"><a class="anchor" href="#default_beans"></a>5.6. デフォルトの Bean</h3>
<div class="paragraph">
<p>Quarkus は、CDI が現在サポートしていない機能を追加します。これは、利用可能な手段 (Beanクラス、producer、合成 Bean など) で同等の型と修飾子を持つ他の Bean が宣言されていない場合に、条件付きで Bean を宣言することです。これは、<code>@io .quarkus.Arc.DefaultBean</code> アノテーションを使用して行われ、例を挙げて説明するのが最善です。</p>
</div>
<div class="paragraph">
<p>以下のコードのようにいくつかの CDI Bean を宣言する Quarkus エクステンションがあるとします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    public Tracer tracer(Reporter reporter, Configuration configuration) {
        return new Tracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Configuration configuration() {
        // create a Configuration
    }

    @Produces
    @DefaultBean
    public Reporter reporter(){
        // create a Reporter
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The idea is that the extension autoconfigures things for the user, eliminating a lot of boilerplate - we can just <code>@Inject</code> a <code>Tracer</code> wherever it is needed. Now imagine that in our application we would like to utilize the configured <code>Tracer</code>, but we need to customize it a little, for example by providing a custom <code>Reporter</code>. The only thing that would be needed in our application would be something like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class CustomTracerConfiguration {

    @Produces
    public Reporter reporter(){
        // create a custom Reporter
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@DefaultBean</code> では、エクステンション (またはそのための他のコード) が Quarkus がサポートする何らかの方法でその型の Bean が提供されている場合、バックオフ中にデフォルトを提供することができます。</p>
</div>
</div>
<div class="sect2">
<h3 id="enable_build_profile"><a class="anchor" href="#enable_build_profile"></a>5.7. Enabling Beans for Quarkus Build Profile</h3>
<div class="paragraph">
<p>Quarkus は、CDI が現在サポートしていない機能を追加しました。これは、Quarkus のビルド時プロファイルが有効になっているときに条件付きで Bean を有効にするというもので、<code>@io.quarkus.arc.profile.IfBuildProfile</code> と <code>@io.quarkus.arc.profile.UnlessBuildProfile</code> のアノテーションを使用します。<code>@io.quarkus.arc.DefaultBean</code> と合わせて使用すると、これらのアノテーションにより、異なるビルドプロファイルに対して異なる Bean 構成を作成することができます。</p>
</div>
<div class="paragraph">
<p>Imagine for instance that an application contains a bean named <code>Tracer</code>, which needs to do nothing when in tests or in dev mode, but works in its normal capacity for the production artifact. An elegant way to create such beans is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @IfBuildProfile("prod")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If instead, it is required that the <code>Tracer</code> bean also works in dev mode and only default to doing nothing for tests, then <code>@UnlessBuildProfile</code> would be ideal. The code would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @UnlessBuildProfile("test") // this will be enabled for both prod and dev build time profiles
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
実行時プロファイルは、<code>@IfBuildProfile</code> および <code>@UnlessBuildProfile</code> を使用した Bean 解決には影響を及ぼしません。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="enable_build_properties"><a class="anchor" href="#enable_build_properties"></a>5.8. Enabling Beans for Quarkus Build Properties</h3>
<div class="paragraph">
<p>Quarkus adds a capability that CDI currently does not support which is to conditionally enable a bean when a Quarkus build time property has/has not a specific value, via the <code>@io.quarkus.arc.properties.IfBuildProperty</code> and <code>@io.quarkus.arc.properties.UnlessBuildProperty</code> annotations. When used in conjunction with <code>@io.quarkus.arc.DefaultBean</code>, this annotation allow for the creation of different bean configurations for different build properties.</p>
</div>
<div class="paragraph">
<p><code>Tracer</code> を使用して上で述べたシナリオも、以下のように実装することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @IfBuildProperty(name = "some.tracer.enabled", stringValue = "true")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>@IfBuildProperty</code> and <code>@UnlessBuildProperty</code> are repeatable annotations, i.e. a bean will only be enabled if <strong>all</strong> the conditions defined by these annotations are satisfied.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>代わりに、<code>some.tracer.enabled</code> プロパティーが <code>false</code> でない場合にのみ <code>RealTracer</code> Bean が使用されることが要求される場合は、<code>@UnlessBuildProperty</code> が理想的です。コードは以下のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @UnlessBuildProperty(name = "some.tracer.enabled", stringValue = "false")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
実行時に設定されたプロパティーは、 <code>@IfBuildProperty</code> を使用しても Bean の解決に全く影響しません。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="選択された代替の宣言"><a class="anchor" href="#選択された代替の宣言"></a>5.9. 選択された代替の宣言</h3>
<div class="paragraph">
<p>CDI では、代替の Bean は、<code>@Priority</code> を使用してアプリケーションに対してグローバルに選択することも、<code>beans.xml</code> 記述子を使用した Bean アーカイブ用に選択することもできます。Quarkus には単純化された Bean 検出があり、`beans.xml`の内容は無視されます。</p>
</div>
<div class="paragraph">
<p><code>@javax.annotation.Priority</code> の欠点は、<code>@Target({ TYPE, PARAMETER })</code> であるため、プロデューサーメソッドおよびフィールドには使用できません。この問題は、Common Annotations 2.1 で修正する必要があります。Quarkus がこのバージョンの <code>jakarta.annotation-api</code> にアップグレードするまでは、代わりに <code>@io.quarkus.arc.Priority</code> を使用することをお勧めします。</p>
</div>
<div class="paragraph">
<p>ただし、統一された設定を使用して、アプリケーションの代替を選択することもできます。<code>quarkus.arc.selected-alternatives</code> プロパティーは、代替 Bean を照合するために使用される文字列値のリストを受け入れます。一致する値がある場合は、関連する Bean に <code>Integer#MAX_VALUE</code> の優先順位が使用されます。<code>@Priority</code> または <code>@AlternativePriority</code> で宣言された優先度は上書きされます。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. 値の例</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バリューe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">説明</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean クラス、または producer を宣言する Bean の Bean クラスの完全修飾名に一致します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean クラスのパッケージが <code>org.acme</code> である Bean に一致します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean クラスのパッケージが <code>org.acme</code> で開始する Bean に一致します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean クラス、または producer を宣言する Bean の Bean クラスの単純名に一致します。</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">application.properties の例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.selected-alternatives=org.acme.Foo,org.acme.*,Bar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="簡略化された-producer-メソッドの宣言"><a class="anchor" href="#簡略化された-producer-メソッドの宣言"></a>5.10. 簡略化された Producer メソッドの宣言</h3>
<div class="paragraph">
<p>CDI では、producer メソッドは常に <code>@Produces</code> とアノテーションされていなければなりません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Producers {

  @Inject
  @ConfigProperty(name = "cool")
  String coolProperty;

  @Produces
  @ApplicationScoped
  MyService produceService() {
    return new MyService(coolProperty);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus では、producer メソッドにスコープアノテーション、ステレオタイプ、または修飾子が付いている場合は、<code>@Produces</code> アノテーションを完全に省略できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Producers {

  @ConfigProperty(name = "cool")
  String coolProperty;

  @ApplicationScoped
  MyService produceService() {
    return new MyService(coolProperty);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="静的メソッドのインターセプション"><a class="anchor" href="#静的メソッドのインターセプション"></a>5.11. 静的メソッドのインターセプション</h3>
<div class="paragraph">
<p>インターセプターの仕様は、<em>around-invoke</em> メソッドを静的宣言してはならないことは明らかです。しかし、この制限は、主に技術的な制限によって設定されました。Quarkus は追加のクラス変換を可能にするビルド時指向のスタックであるため、この制限は適用されなくなりました。インターセプタ―バインディングで非プライベートの静的メソッドにアノテーションを付けることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Services {

  @Logged <i class="conum" data-value="1"></i><b>(1)</b>
  static BigDecimal computePrice(long amount) { <i class="conum" data-value="2"></i><b>(2)</b>
    BigDecimal price;
    // Perform computations...
    return price;
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Logged</code> はインターセプターバインディングです。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>各メソッドの呼び出しは、<code>Logged</code> に関連付けられたインターセプターがある場合に傍受されます。</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="制約事項"><a class="anchor" href="#制約事項"></a>5.11.1. 制約事項</h4>
<div class="ulist">
<ul>
<li>
<p>下位互換性の理由から <strong>メソッドレベルのバインディング</strong> のみが考慮されます (そうでないとクラスレベルのバインディングを宣言している Bean クラスの静的メソッドが突然傍受されてしまいます)。</p>
</li>
<li>
<p>プライベートなスタティックメソッドは決して傍受されません。</p>
</li>
<li>
<p><code>InvocationContext#getTarget()</code> は明白な理由により <code>null</code> を返します。したがって、静的メソッドを傍受するときに既存のインターセプターがすべて正しく動作するとは限りません。</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
インターセプターは <code>InvocationContext.getMethod()</code> を使用して静的メソッドを検出し、それに応じて動作を調整することができます。
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="final-クラスとメソッドを処理する能力"><a class="anchor" href="#final-クラスとメソッドを処理する能力"></a>5.12. final クラスとメソッドを処理する能力</h3>
<div class="paragraph">
<p>通常の CDI では、<code>final</code> としてマークされているクラス、または <code>final</code> メソッドを持つクラスは、プロキシー作成の対象になりません。これは、インターセプターと通常のスコープ Bean が正しく動作しないことを意味します。このような状況は、クラスおよびメソッドがデフォルトで `final`である Kotlin のような代替 JVM 言語で CDI を使用しようとするときに非常に一般的です。</p>
</div>
<div class="paragraph">
<p>しかし、Quarkus では、<code>quarkus.arc.transform-unproxyable-classes</code> を <code>true</code> (デフォルト値) に設定すると、これらの制限を抑制することができます。</p>
</div>
</div>
<div class="sect2">
<h3 id="コンテナー管理型の並行処理"><a class="anchor" href="#コンテナー管理型の並行処理"></a>5.13. コンテナー管理型の並行処理</h3>
<div class="paragraph">
<p>CDI Bean の標準的な同時実行制御メカニズムはありません。それにもかかわらず、Bean インスタンスは、複数のスレッドから同時に共有およびアクセスすることができます。その場合は、スレッドセーフでなければなりません。標準の Java コンストラクト (<code>volatile</code>、<code>synchronized</code>、<code>ReadWriteLock</code> など) を使用するか、コンテナーに同時アクセスを制御させることができます。Quarkus は、<code>@io.quarkus.arc.Lock</code> と、このインターセプタ―バインディング用の組み込みインターセプターを提供します。傍受された Bean のコンテキストインスタンスに関連付けられた各インターセプターインスタンスは、公平でない順序付けポリシーを持つ <code>ReadWriteLock</code> を保持しています。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>io.quarkus.arc.Lock</code> は通常のインターセプターバインディングであるため、任意のスコープを持つ任意の Bean に使用することができます。しかし、特に「共有」スコープ、たとえば <code>@Singleton</code> や <code>@ApplicationScoped</code> に有益です。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">コンテナー管理された並行処理の例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.arc.Lock;

@Lock <i class="conum" data-value="1"></i><b>(1)</b>
@ApplicationScoped
class SharedService {

  void addAmount(BigDecimal amount) {
    // ...changes some internal state of the bean
  }

  @Lock(value = Lock.Type.READ, time = 1, unit = TimeUnit.SECONDS) <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>
  BigDecimal getAmount() {
    // ...it is safe to read the value concurrently
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>クラスで宣言された (<code>@Lock (Lock.type.Write)</code> にマッピングされる) <code>@Lock</code> は、任意のビジネスメソッドの呼び出しに対して Bean インスタンスをロックするようにコンテナーに指示します。つまり、クライアントには「排他アクセス」があり、同時呼び出しは許可されません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>@Lock(Lock.Type.READ)</code> は、クラスレベルで指定された値を上書きします。これは、Bean のインスタンスが <code>@Lock(Lock.Type.WRITE)</code> によってロックされていない限り、任意の数のクライアントが同時にメソッドを呼び出すことができることを意味します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>また、「待ち時間」を指定することもできます。指定した時間内にロックを取得できない場合は <code>LockException</code> が発生します。</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="反復可能なインターセプターバインディング"><a class="anchor" href="#反復可能なインターセプターバインディング"></a>5.14. 反復可能なインターセプターバインディング</h3>
<div class="paragraph">
<p>Quarkusでは、<code>@Repeatable</code> インターセプター結合アノテーションのサポートが制限されています。</p>
</div>
<div class="paragraph">
<p>インターセプタ―をコンポーネントにバインドする場合は、メソッドに対して複数の <code>@Repeatable</code> アノテーションを宣言できます。インターセプター仕様との相互作用に関する未解決の質問があるため、クラスとステレオタイプで宣言された反復可能なインターセプターバインディングはサポートされていません。これは将来追加される可能性があります。</p>
</div>
<div class="paragraph">
<p>たとえば、キャッシュをクリアするインターセプタ―があるとします。対応するインターセプタ―バインディングは <code>@CacheInvalidateAll</code> と呼ばれ、<code>@Repeatable</code> として宣言されます。同時に 2 つのキャッシュをクリアしたい場合は、<code>@CacheInvalidateAll</code> を 2 回追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
class CachingService {
  @CacheInvalidateAll(cacheName = "foo")
  @CacheInvalidateAll(cacheName = "bar")
  void heavyComputation() {
    // ...
    // some computation that updates a lot of data
    // and requires 2 caches to be invalidated
    // ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ここまで、インターセプタ―がどのように使用されるかを説明しました。では、インターセプターを作成するにはどうすれば良いでしょうか。</p>
</div>
<div class="paragraph">
<p>インターセプタ―のインターセプタ―バインディングを宣言する場合は、通常どおり、インターセプタ―クラスに複数の <code>@Repeatable</code> アノテーションを追加できます。<code>@Cached</code> アノテーションの場合と同様に、アノテーションメンバーが <code>@Nonbinding</code> の場合は役に立ちませんが、それ以外の場合は重要になります。</p>
</div>
<div class="paragraph">
<p>たとえば、メソッド呼び出しを特定のターゲットに自動的に記録できるインターセプタ―があるとします。インターセプタ―バインディングアノテーション <code>@Logged</code> には、ログを保存する場所を指定する <code>target</code> というメンバーがあります。この実装は、コンソールログとファイルロギングに制限することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Interceptor
@Logged(target = "console")
@Logged(target = "file")
class NaiveLoggingInterceptor {
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>他にも、異なるターゲットへのメソッド呼び出しをログに記録するためのインターセプターを提供することができます。</p>
</div>
</div>
<div class="sect2">
<h3 id="プログラムによるルックアップの結果をキャッシュする"><a class="anchor" href="#プログラムによるルックアップの結果をキャッシュする"></a>5.15. プログラムによるルックアップの結果をキャッシュする</h3>
<div class="paragraph">
<p>In certain situations, it is practical to obtain a bean instance programmatically via an injected <code>javax.enterprise.inject.Instance</code> and <code>Instance.get()</code>. However, according to the specification the <code>get()</code> method must identify the matching bean and obtain a contextual reference. As a consequence, a new instance of a <code>@Dependent</code> bean is returned from each invocation of <code>get()</code>. Moreover, this instance is a dependent object of the injected <code>Instance</code>. This behavior is well-defined, but it may lead to unexpected errors and memory leaks. Therefore, Quarkus comes with the <code>io.quarkus.arc.WithCaching</code> annotation. An injected <code>Instance</code> annotated with this annotation will cache the result of the <code>Instance#get()</code> operation. The result is computed on the first call and the same value is returned for all subsequent calls, even for <code>@Dependent</code> beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Producer {

  AtomicLong nextLong = new AtomicLong();
  AtomicInteger nextInt = new AtomicInteger();

   @Dependent
   @Produces
   Integer produceInt() {
     return nextInt.incrementAndGet();
   }

   @Dependent
   @Produces
   Long produceLong() {
     return nextLong.incrementAndGet();
   }
}

class Consumer {

  @Inject
  Instance&lt;Long&gt; longInstance;

  @Inject
  @WithCaching
  Instance&lt;Integer&gt; intInstance;

  // this method should always return true
  // Producer#produceInt() is only called once
  boolean pingInt() {
    return intInstance.get().equals(intInstance.get());
  }

  // this method should always return false
  // Producer#produceLong() is called twice per each pingLong() invocation
  boolean pingLong() {
    return longInstance.get().equals(longInstance.get());
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>io.quarkus.arc.InjectableInstance.clearCache()</code> を介してキャッシュされた値をクリアすることも可能です。この場合、<code>javax.enterprise.inject.Instance</code> の代わりに Quarkus 固有の <code>io.quarkus.arc.InjectableInstance</code> を注入する必要があります。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="プログラムによるルックアップで取得できる-bean-を宣言的に選択する"><a class="anchor" href="#プログラムによるルックアップで取得できる-bean-を宣言的に選択する"></a>5.16. プログラムによるルックアップで取得できる Bean を宣言的に選択する</h3>
<div class="paragraph">
<p><code>javax.enterprise.inject.Instance</code> を介したプログラムによるルックアップで取得できる Bean のセットを絞り込むと便利な場合があります。通常、ユーザーはランタイム設定プロパティーに基づいてインターフェイスの適切な実装を選択する必要があります。</p>
</div>
<div class="paragraph">
<p>インターフェイス <code>org.acme.Service</code> を実装した 2 つの Bean があるとします。実装が CDI 修飾子を宣言していない限り、<code>org.acme.Service</code> を直接注入することはできません。しかし、代わりに <code>Instance&lt;Service&gt;</code> を注入して、すべての実装を繰り返し、正しいものを手動で選択することができます。また、<code>@LookupIfProperty</code> と <code>@LookupUnlessProperty</code> アノテーションを利用することもできます。<code>@LookupIfProperty</code> は、実行時設定プロパティーが提供された値と一致する場合にのみ、Bean を取得する必要があることを示します。一方、<code>@LookupUnlessProperty</code> は、実行時設定プロパティーが提供された値と一致しない場合にのみ、Bean を取得する必要があることを示します。</p>
</div>
<div class="listingblock">
<div class="title"><code>@LookupIfProperty</code> Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> interface Service {
    String name();
 }

 @LookupIfProperty(name = "service.foo.enabled", stringValue = "true")
 @ApplicationScoped
 class ServiceFoo implements Service {

    public String name() {
       return "foo";
    }
 }

 @ApplicationScoped
 class ServiceBar implements Service {

    public String name() {
       return "bar";
    }
 }

 @ApplicationScoped
 class Client {

    @Inject
    Instance&lt;Service&gt; service;

    void printServiceName() {
       // This will print "bar" if the property "service.foo.enabled" is NOT set to "true"
       // If "service.foo.enabled" is set to "true" then service.get() would result in an AmbiguousResolutionException
       System.out.println(service.get().name());
    }
 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="複数の-bean-インスタンスを直感的に注入する"><a class="anchor" href="#複数の-bean-インスタンスを直感的に注入する"></a>5.17. 複数の Bean インスタンスを直感的に注入する</h3>
<div class="paragraph">
<p>CDI では、<code>java.lang.Iterable</code> を実装する <code>javax.enterprise.inject.Instance</code> を介して複数の Bean インスタンス (いわゆるコンテキスト参照) を注入することができます。ただし、それは正確には直感的ではありません。そのため、Quarkus に新しい方法が導入されました。<code>io.quarkus.arc.All</code> 修飾子でアノテーションが付けられた <code>java.util.List</code> を注入できます。リスト内の要素のタイプは、ルックアップを実行するときに必要なタイプとして使用されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class Processor {

     @Inject
     @All
     List&lt;Service&gt; services; <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>注入されたインスタンスは、<em>disambiguated</em> bean のコンテキスト参照の <em>immutable list</em> です。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>このインジェクションポイントに必要なタイプは <code>Service</code> であり、追加の修飾子は宣言されていません。</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
リストは、<code>io.quarkus.arc.InjectableBean#getPriority()</code> で定義されている優先度で並べ替えられます。優先度の高い方が優先されます。一般に、<code>@javax.annotation.Priority</code> および <code>@io.quarkus.arc.Priority</code> アノテーションを使用して、クラス Bean、プロデューサーメソッド、またはプロデューサーフィールドに優先度を割り当てることができます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>インジェクションポイントが <code>@All</code> 以外の修飾子を宣言していない場合、<code>@Any</code> が使用されます。つまり、動作は <code>@Inject @Any Instance&lt;Service&gt;</code> と同等です。</p>
</div>
<div class="paragraph">
<p><code>io.quarkus.arc.InstanceHandle</code> でラップされた Bean インスタンスのリストを注入することもできます。これは、関連する Bean メタデータを検査する必要がある場合に役立ちます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class Processor {

     @Inject
     @All
     List&lt;InstanceHandle&lt;Service&gt;&gt; services;

     public void doSomething() {
       for (InstanceHandle&lt;Service&gt; handle : services) {
         if (handle.getBean().getScope().equals(Dependent.class)) {
           handle.get().process();
           break;
         }
       }
     }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
型変数もワイルドカードも <code>@All List&lt;&gt;</code> インジェクションポイントのタイプパラメーターとしては有効ではありません。つまり、<code>@Inject @All List&lt;?&gt; all</code> はサポートされておらず、デプロイメントエラーになります。
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>Arc.container().listAll()</code> メソッドを使用して、プログラムですべての Bean インスタンスハンドルのリストを取得することもできます。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="メソッドとコンストラクターのクラスレベルのインターセプターバインディングを無視する"><a class="anchor" href="#メソッドとコンストラクターのクラスレベルのインターセプターバインディングを無視する"></a>5.18. メソッドとコンストラクターのクラスレベルのインターセプターバインディングを無視する</h3>
<div class="paragraph">
<p>マネージド Bean がクラスレベルでインターセプターバインディングアノテーションを宣言する場合、対応する <code>@AroundInvoke</code> インターセプターがすべてのビジネスメソッドに適用されます。同様に、対応する <code>@AroundConstruct</code> インターセプターが Bean コンストラクターに適用されます。</p>
</div>
<div class="paragraph">
<p>たとえば、<code>@Logged</code> バインディングアノテーションを持つロギングインターセプターと <code>@Traced</code> バインディングアノテーションを持つトレースインターセプターがあるとします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
@Logged
public class MyService {
    public void doSomething() {
        ...
    }

    @Traced
    public void doSomethingElse() {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>この例では、<code>doSomething</code> と <code>doSomethingElse</code> の両方が架空のロギングインターセプターによってインターセプトされます。さらに、<code>doSomethingElse</code> メソッドは、架空のトレースインターセプターによってインターセプトされます。</p>
</div>
<div class="paragraph">
<p>もし <code>@Traced</code> インターセプターが必要なロギングもすべて行っていた場合、このメソッドでは <code>@Logged</code> インターセプターを省略したいのですが、他のすべてのメソッドではそのままにしておきたいと思います。これを実現するには、メソッドに <code>@NoClassInterceptors</code> というアノテーションを付けます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Traced
@NoClassInterceptors
public void doSomethingElse() {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@NoClassInterceptors</code> アノテーションはメソッドとコンストラクターに付けることができ、これらのメソッドとコンストラクターではすべてのクラスレベルのインターセプターが無視されることを意味します。つまり、メソッド/コンストラクターに <code>@NoClassInterceptors</code> アノテーションが付けられている場合、このメソッド/コンストラクターに適用されるインターセプターは、メソッド/コンストラクターで直接宣言されたインターセプターのみです。</p>
</div>
<div class="paragraph">
<p>このアノテーションは、ビジネスメソッドインターセプター (<code>@AroundInvoke</code>) とコンストラクターライフサイクルコールバックインターセプター (<code>@AroundConstruct</code>) にのみ影響します。</p>
</div>
</div>
<div class="sect2">
<h3 id="exceptions-thrown-by-an-asynchronous-observer-method"><a class="anchor" href="#exceptions-thrown-by-an-asynchronous-observer-method"></a>5.19. Exceptions Thrown By An Asynchronous Observer Method</h3>
<div class="paragraph">
<p>非同期オブザーバーによって例外が出力された場合、<code>fireAsync()</code> メソッドによって返される <code>CompletionStage</code> は例外的に完了し、イベントプロデューサーが適切に反応できるようにします。ただし、イベントプロデューサーがこれを問題にしない場合、例外は黙示的に無視されます。したがって、Quarkus はデフォルトでエラーメッセージをログに記録します。カスタムの <code>AsyncObserverExceptionHandler</code> を実装することも可能です。このインターフェイスを実装する Bean は、<code>@javax.inject.Singleton</code> または <code>@javax.enterprise.context.ApplicationScoped</code> である必要があります。</p>
</div>
<div class="listingblock">
<div class="title"><code>NoopAsyncObserverExceptionHandler</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton
public class NoopAsyncObserverExceptionHandler implements AsyncObserverExceptionHandler {

  void handle(Throwable throwable, ObserverMethod&lt;?&gt; observerMethod, EventContext&lt;?&gt; eventContext) {
    // do nothing
  }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build_time_apis"><a class="anchor" href="#build_time_apis"></a>6. ビルド時間延長</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus は、インスタント起動と低メモリフットプリントを提供するために、ビルド時の最適化を取り入れています。このアプローチの欠点は、CDI ポータブル・エクステンションをサポートできないことです。それにもかかわらず、ほとんどの機能は、Quarkus <a href="writing-extensions">エクステンション</a> を使用して行うことができます。詳細は、<a href="cdi-integration">integration guide</a> を参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="開発モード"><a class="anchor" href="#開発モード"></a>7. 開発モード</h2>
<div class="sectionbody">
<div class="paragraph">
<p>開発モードでは、JSON 形式で基本的なデバッグ情報を提供するために、2 つの特別なエンドポイントが自動的に登録されます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP GET <code>/q/arc</code> - 要約、Bean の数、設定プロパティーなどを返します。</p>
</li>
<li>
<p>HTTP GET <code>/q/arc/beans</code> - すべての Bean のリストを返します。</p>
<div class="ulist">
<ul>
<li>
<p>クエリーパラメーターを使用して出力をフィルタリングすることができます。</p>
<div class="ulist">
<ul>
<li>
<p><code>scope</code> - 指定した値で終わるスコープを持つ Bean を含みます (つまり <code><a href="http://localhost:8080/q/arc/beans?scope=ApplicationScoped" class="bare">http://localhost:8080/q/arc/beans?scope=ApplicationScoped</a></code>)。</p>
</li>
<li>
<p><code>beanClass</code> - 与えられた値で始まる Bean クラスを持つ Bean を含みます (つまり <code><a href="http://localhost:8080/q/arc/beans?beanClass=org.acme.Foo" class="bare">http://localhost:8080/q/arc/beans?beanClass=org.acme.Foo</a></code>)。</p>
</li>
<li>
<p><code>kind</code> - 指定された種類の Bean (<code>CLASS</code>、<code>PRODUCER_FIELD</code>、<code>PRODUCER_METHOD</code>、<code>INTERCEPTOR</code>、または <code>SYNTHETIC</code>) を含みます (つまり <code><a href="http://localhost:8080/q/arc/beans?kind=PRODUCER_METHOD" class="bare">http://localhost:8080/q/arc/beans?kind=PRODUCER_METHOD</a></code>)。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>HTTP GET <code>/q/arc/removed-beans</code> - ビルド中に削除された未使用の Bean のリストを返します。</p>
</li>
<li>
<p>HTTP GET <code>/q/arc/observers</code> - すべてのオブザーバーメソッドのリストを返します。</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
これらのエンドポイントは開発モードでのみ使用できます。つまり <code>mvn quarkus:dev</code> (または <code>./gradlew quarkusDev</code>) 経由でアプリケーションを実行したときです。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arc-configuration-reference"><a class="anchor" href="#arc-configuration-reference"></a>8. ArC Configuration Reference</h2>
<div class="sectionbody">
<div class="paragraph configuration-legend">
<p><span class="icon"><i class="fa fa-lock" title="ビルド時に固定"></i></span> ビルド時に固定される設定プロパティ - それ以外の設定プロパティは実行時に上書き可能</p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-arc_configuration"></a><a href="#quarkus-arc_configuration">Configuration property</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.remove-unused-beans"></a><code><a href="#quarkus-arc_quarkus.arc.remove-unused-beans">quarkus.arc.remove-unused-beans</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>If set to <code>all</code> (or <code>true</code>) the container will attempt to remove all unused beans.</p>
</li>
<li>
<p>If set to <code>none</code> (or <code>false</code>) no beans will ever be removed even if they are unused (according to the criteria set out below)</p>
</li>
<li>
<p>If set to <code>fwk</code>, then all unused beans will be removed, except the unused beans whose classes are declared in the application code
An unused bean:</p>
</li>
<li>
<p>is not a built-in bean or interceptor,</p>
</li>
<li>
<p>is not eligible for injection to any injection point,</p>
</li>
<li>
<p>is not excluded by any extension,</p>
</li>
<li>
<p>does not have a name,</p>
</li>
<li>
<p>does not declare an observer,</p>
</li>
<li>
<p>does not declare any producer which is eligible for injection to any injection point,</p>
</li>
<li>
<p>is not directly eligible for injection into any <code>javax.enterprise.inject.Instance</code> injection point</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_REMOVE_UNUSED_BEANS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>all</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.auto-inject-fields"></a><code><a href="#quarkus-arc_quarkus.arc.auto-inject-fields">quarkus.arc.auto-inject-fields</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true <code>@Inject</code> is automatically added to all non-static fields that are annotated with one of the annotations defined by <code>AutoInjectAnnotationBuildItem</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_AUTO_INJECT_FIELDS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.transform-unproxyable-classes"></a><code><a href="#quarkus-arc_quarkus.arc.transform-unproxyable-classes">quarkus.arc.transform-unproxyable-classes</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true, the bytecode of unproxyable beans will be transformed. This ensures that a proxy/subclass can be created properly. If the value is set to false, then an exception is thrown at build time indicating that a subclass/proxy could not be created. Quarkus performs the following transformations when this setting is enabled:
 - Remove 'final' modifier from classes and methods when a proxy is required.
 - Create a no-args constructor if needed.
 - Makes private no-args constructors package-private if necessary.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_TRANSFORM_UNPROXYABLE_CLASSES</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.fail-on-intercepted-private-method"></a><code><a href="#quarkus-arc_quarkus.arc.fail-on-intercepted-private-method">quarkus.arc.fail-on-intercepted-private-method</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true, the build fails if a private method that is neither an observer nor a producer, is annotated with an interceptor binding. An example of this is the use of <code>Transactional</code> on a private method of a bean. If set to false, Quarkus simply logs a warning that the annotation will be ignored.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_FAIL_ON_INTERCEPTED_PRIVATE_METHOD</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.config-properties-default-naming-strategy"></a><code><a href="#quarkus-arc_quarkus.arc.config-properties-default-naming-strategy">quarkus.arc.config-properties-default-naming-strategy</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The default naming strategy for <code>ConfigProperties.NamingStrategy</code>. The allowed values are determined by that enum</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_CONFIG_PROPERTIES_DEFAULT_NAMING_STRATEGY</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>from-config</code>, <code>verbatim</code>, <code>kebab-case</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>kebab-case</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.selected-alternatives"></a><code><a href="#quarkus-arc_quarkus.arc.selected-alternatives">quarkus.arc.selected-alternatives</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The list of selected alternatives for an application.
 An element value can be:
 - a fully qualified class name, i.e. <code>org.acme.Foo</code>
 - a simple class name as defined by <code>Class#getSimpleName()</code>, i.e. <code>Foo</code>
 - a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, matches a package
 - a package name with suffix <code>.**</code>, i.e. <code>org.acme.**</code>, matches a package that starts with the value  Each element value is used to match an alternative bean class, an alternative stereotype annotation type or a bean class that declares an alternative producer. If any value matches then the priority of <code>Integer#MAX_VALUE</code> is used for the relevant bean. The priority declared via <code>javax.annotation.Priority</code> or <code>io.quarkus.arc.AlternativePriority</code> is overridden.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_SELECTED_ALTERNATIVES</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.auto-producer-methods"></a><code><a href="#quarkus-arc_quarkus.arc.auto-producer-methods">quarkus.arc.auto-producer-methods</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true then <code>javax.enterprise.inject.Produces</code> is automatically added to all non-void methods that are annotated with a scope annotation, a stereotype or a qualifier, and are not annotated with <code>Inject</code> or <code>Produces</code>, and no parameter is annotated with <code>Disposes</code>, <code>Observes</code> or <code>ObservesAsync</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_AUTO_PRODUCER_METHODS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.exclude-types"></a><code><a href="#quarkus-arc_quarkus.arc.exclude-types">quarkus.arc.exclude-types</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The list of types that should be excluded from discovery.
 An element value can be:
 - a fully qualified class name, i.e. <code>org.acme.Foo</code>
 - a simple class name as defined by <code>Class#getSimpleName()</code>, i.e. <code>Foo</code>
 - a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, matches a package
 - a package name with suffix <code>.**</code>, i.e. <code>org.acme.**</code>, matches a package that starts with the value  If any element value matches a discovered type then the type is excluded from discovery, i.e. no beans and observer methods are created from this type.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_EXCLUDE_TYPES</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.unremovable-types"></a><code><a href="#quarkus-arc_quarkus.arc.unremovable-types">quarkus.arc.unremovable-types</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>List of types that should be considered unremovable regardless of whether they are directly used or not. This is a configuration option equivalent to using <code>io.quarkus.arc.Unremovable</code> annotation.
 An element value can be:
 - a fully qualified class name, i.e. <code>org.acme.Foo</code>
 - a simple class name as defined by <code>Class#getSimpleName()</code>, i.e. <code>Foo</code>
 - a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, matches a package
 - a package name with suffix <code>.**</code>, i.e. <code>org.acme.**</code>, matches a package that starts with the value  If any element value matches a discovered bean, then such a bean is considered unremovable.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_UNREMOVABLE_TYPES</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.detect-unused-false-positives"></a><code><a href="#quarkus-arc_quarkus.arc.detect-unused-false-positives">quarkus.arc.detect-unused-false-positives</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true then the container attempts to detect "unused removed beans" false positives during programmatic lookup at runtime. You can disable this feature to conserve some memory when running your application in production.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_DETECT_UNUSED_FALSE_POSITIVES</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.detect-wrong-annotations"></a><code><a href="#quarkus-arc_quarkus.arc.detect-wrong-annotations">quarkus.arc.detect-wrong-annotations</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true then the container attempts to detect <em>wrong</em> usages of annotations and eventually fails the build to prevent unexpected behavior of a Quarkus application.
 A typical example is <code>@javax.ejb.Singleton</code> which is often confused with <code>@javax.inject.Singleton</code>. As a result a component annotated with <code>@javax.ejb.Singleton</code> would be completely ignored. Another example is an inner class annotated with a scope annotation - this component would be again completely ignored.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_DETECT_WRONG_ANNOTATIONS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.dev-mode.monitoring-enabled"></a><code><a href="#quarkus-arc_quarkus.arc.dev-mode.monitoring-enabled">quarkus.arc.dev-mode.monitoring-enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true then the container monitors business method invocations and fired events during the development mode.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_DEV_MODE_MONITORING_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.test.disable-application-lifecycle-observers"></a><code><a href="#quarkus-arc_quarkus.arc.test.disable-application-lifecycle-observers">quarkus.arc.test.disable-application-lifecycle-observers</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>If set to true then disable <code>StartupEvent</code> and <code>ShutdownEvent</code> observers declared on application bean classes during the tests.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_TEST_DISABLE_APPLICATION_LIFECYCLE_OBSERVERS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.ignored-split-packages"></a><code><a href="#quarkus-arc_quarkus.arc.ignored-split-packages">quarkus.arc.ignored-split-packages</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The list of packages that will not be checked for split package issues.
 A package string representation can be:
 - a full name of the package, i.e. <code>org.acme.foo</code>
 - a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, which matches a package that starts with provided value</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_IGNORED_SPLIT_PACKAGES</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-arc_quarkus.arc.exclude-dependency-artifacts-that-should-be-excluded-from-discovery"></a><a href="#quarkus-arc_quarkus.arc.exclude-dependency-artifacts-that-should-be-excluded-from-discovery">Artifacts that should be excluded from discovery</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.exclude-dependency.-dependency-name-.group-id"></a><code><a href="#quarkus-arc_quarkus.arc.exclude-dependency.-dependency-name-.group-id">quarkus.arc.exclude-dependency."dependency-name".group-id</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The maven groupId of the artifact.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_EXCLUDE_DEPENDENCY__DEPENDENCY_NAME__GROUP_ID</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">required <span class="icon"><i class="fa fa-exclamation-circle" title="Configuration property is required"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.exclude-dependency.-dependency-name-.artifact-id"></a><code><a href="#quarkus-arc_quarkus.arc.exclude-dependency.-dependency-name-.artifact-id">quarkus.arc.exclude-dependency."dependency-name".artifact-id</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The maven artifactId of the artifact.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_EXCLUDE_DEPENDENCY__DEPENDENCY_NAME__ARTIFACT_ID</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">required <span class="icon"><i class="fa fa-exclamation-circle" title="Configuration property is required"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus.arc.exclude-dependency.-dependency-name-.classifier"></a><code><a href="#quarkus-arc_quarkus.arc.exclude-dependency.-dependency-name-.classifier">quarkus.arc.exclude-dependency."dependency-name".classifier</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The maven classifier of the artifact.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_ARC_EXCLUDE_DEPENDENCY__DEPENDENCY_NAME__CLASSIFIER</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
</tbody>
</table>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus はオープンです。このプロジェクトの全ての依存関係は<a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>または互換性のあるライセンスの元で利用出来ます。<br /><br />このウェブサイトは <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> で構築されており、<a href='https://pages.github.com/' target='_blank'>Github Pages</a>にホストされており、完全にオープンソースです。改善したい場合、 <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>ウェブサイトをフォークし</a>、修正してみせてください。</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
            <li><a href="/">ホーム</a></li>
          
            <li><a href="/about">Quarkusについて</a></li>
          
            <li><a href="/blog">ブログ</a></li>
          
            <li><a href="/insights">ポッドキャスト</a></li>
          
            <li><a href="/events">イベント</a></li>
          
            <li><a href="/newsletter">ニュースレター</a></li>
          
            <li><a href="/publications">出版</a></li>
          
            <li><a href="/awards">受賞</a></li>
          
            <li><a href="/security">セキュリティポリシー</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォロー</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">Twitter</a></li>
          
            <li><a href="https://www.facebook.com/quarkusio">Facebook</a></li>
          
            <li><a href="https://www.linkedin.com/company/quarkusio/">Linkedin</a></li>
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg">Youtube</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
            <li><a href="/support">サポート</a></li>
          
            <li><a href="/guides">ガイド</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">入門</a></li>
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions">ディスカッション</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">開発メーリングリスト</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
            <li><a href="https://quarkus.io/">English</a></li>
          
            <li><a href="https://ja.quarkus.io/">日本語</a></li>
          
            <li><a href="https://cn.quarkus.io/">简体中文</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています：</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">等々...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
</body>

</html>
